nextflow_process {

    name "Test Process RUN_ASCAT_EXOMES"
    script "modules/ascat.nf"
    process "RUN_ASCAT_EXOMES"

    test("Should run without failures") {

        when {
            process {
            
                """
                input[0] = tuple(
                [[pair_id:'PD52292a_PD52292b'],[normal: 'PD52292a', tumor: 'PD52292b', pair_id: 'PD52292a_PD52292b', Sex: 'M', Sanger_DNA_ID: 'PD52292b', 'OK_to_analyse_DNA?': 'Yes', Phenotype: 'N', sexchr: 'XY', normal_file: '/workspaces/ascat/tests/testdata/PD52292a.sample.dupmarked.bam', tumor_file: '/workspaces/ascat/tests/testdata/PD52292b.sample.dupmarked.bam']],
                file("$baseDir/tests/testdata/PD52292a.sample.dupmarked.bam"),
                file("$baseDir/tests/testdata/PD52292b.sample.dupmarked.bam"))
                input[1] = "$baseDir"
                input[2] = "$baseDir/results"
                """
            }
        }

        then {
            assert process.success
            // assert snapshot(process.out).match()
        }

    }

}

